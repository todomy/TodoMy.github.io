<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark_colorblind" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 缓存控制头 -->
    <meta http-equiv="Cache-Control" content="max-age=31536000, public, must-revalidate">
    <!-- 移除固定过期日期，让浏览器基于max-age自动计算 -->
    <link href='/plugins/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://avatars.githubusercontent.com/u/62632079?v=4"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="

> 多元思维模型与逆向思考的艺术

在纷繁复杂的现代社会中，我们常常被各种信息淹没，在投资、职业选择和人生决策中感到迷茫。">
<meta property="og:title" content="《穷查理宝典》">
<meta property="og:description" content="

> 多元思维模型与逆向思考的艺术

在纷繁复杂的现代社会中，我们常常被各种信息淹没，在投资、职业选择和人生决策中感到迷茫。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://todomy.github.io/post/%E3%80%8A-qiong-cha-li-bao-dian-%E3%80%8B.html">
<meta property="og:image" content="https://avatars.githubusercontent.com/u/62632079?v=4">
<title>《穷查理宝典》</title>

<!-- 预连接到utteranc.es域名，减少DNS查询和连接建立时间 -->
<link rel="preconnect" href="https://utteranc.es">
<link rel="dns-prefetch" href="https://utteranc.es">


</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}

/* 评论相关样式已简化 */

@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
</style>




<body>
    <div id="header">
<h1 class="postTitle">《穷查理宝典》</h1>
<div class="title-right">
    <a href="https://todomy.github.io" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/todomy/TodoMy.github.io/issues/91" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><blockquote>
<p>多元思维模型与逆向思考的艺术</p>
</blockquote>
<p>在纷繁复杂的现代社会中，我们常常被各种信息淹没，在投资、职业选择和人生决策中感到迷茫。而查理·芒格——这位伯克希尔·哈撒韦公司的智慧巨人、沃伦·巴菲特的黄金搭档——用他跨越近一个世纪的智慧结晶，为我们提供了一幅穿越认知迷雾的导航图。《穷查理宝典》绝非普通的投资指南，而是一部关于<strong>如何正确思考、明智决策和有意义生活</strong>的智慧集成。这部被无数人奉为“思想圣经”的著作，将引领我们探索多元思维模型的力量，掌握逆向思考的艺术，并重新定义我们对智慧的理解。</p>
<h2 id="_1">一、传奇智者的多维人生：谁是以“穷查理”为名的思想巨匠？</h2>
<p>查理·芒格（1924-2023）的智慧之旅始于美国内布拉斯加州的奥马哈市，与沃伦·巴菲特的出生地相同。这位思想巨匠的人生轨迹却比传统投资家丰富得多：</p>
<ul>
<li><strong>复合型知识背景</strong>：先后毕业于密歇根大学数学系、哈佛法学院，获得数学学士和法学博士学位，这种<strong>跨学科背景</strong>奠定了他多元思维的基础。</li>
<li><strong>多重职业身份</strong>：曾做过律师、房地产开发商和私募投资者，在每项职业中都取得非凡成就，最终与巴菲特联手创造了投资史上的奇迹。</li>
<li><strong>伯克希尔的智慧引擎</strong>：自1978年担任伯克希尔·哈撒韦公司副主席后，他与巴菲特共同创造了<strong>51年间年复合增长率19.2%</strong> 的投资奇迹。如果52年前投资伯克希尔19美元，到2017年这笔投资已变成172,108美元。</li>
</ul>
<p>巴菲特如此评价这位搭档：“我遇到的聪明人没有不每天阅读的——没有，一个都没有。沃伦读书之多，我读书之多，可能会让你感到吃惊。”芒格被尊称为“<strong>行走的百科全书</strong>”和“<strong>幕后智囊</strong>”，其智慧深度往往令初次接触者震撼。他坚持的“<strong>理性、正直与终身学习</strong>”原则，构成了他思想体系的基石。</p>
<h2 id="_2">二、多元思维模型：穿透复杂世界的认知利器</h2>
<blockquote>
<p>“在手里拿着铁锤的人看来，每个问题都像钉子。”——查理·芒格</p>
</blockquote>
<p>芒格对传统单一学科思维的批判直击要害。他观察到当人们只掌握一两种思维模型时，就会扭曲现实以适应自己的认知工具。作为解方，他提出了影响深远的<strong>多元思维模型理论</strong>——要求我们掌握<strong>多学科的核心原理</strong>，构建多元认知框架：</p>
<ul>
<li><strong>为什么需要多元思维</strong>：现实世界的问题本质上是<strong>跨学科的综合体</strong>，单维度分析必然导致认知盲区。一个投资决策可能同时涉及公司财务、行业趋势、管理者心理学、市场宏观环境等多重因素。</li>
<li><strong>核心学科架构</strong>：<ul>
<li><strong>数学</strong>：掌握复利原理、排列组合和决策树理论（“复利是世界第八大奇迹”——芒格）</li>
<li><strong>心理学</strong>：理解25种人类误判心理倾向（如奖励超级反应、避免怀疑倾向等）</li>
<li><strong>微观经济学</strong>：洞察规模优势、冲浪模型和寡头垄断理论</li>
<li><strong>物理学/生物学</strong>：运用临界点、冗余备份等自然系统原理</li>
<li><strong>统计学</strong>：区分因果关系与相关性，避免数据误判</li>
</ul>
</li>
</ul>
<p>芒格强调：“<strong>你必须知道重要学科的重要理论，并经常使用它们——要全部都用上，而不是只用几种。</strong>”当这些模型共同作用并产生合力时，就会出现他所说的“<strong>lollapalooza效应</strong>”——多种因素共同作用导致非线性爆发式结果。这种效应在商业成功、投资回报乃至个人成长中都有显著体现。</p>
<p><em>表：单一思维与多元思维的认知对比</em></p>
<table>
<thead>
<tr>
<th><strong>认知维度</strong></th>
<th><strong>单一学科思维</strong></th>
<th><strong>多元思维模型</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>问题分析</strong></td>
<td>线性简化，追求单一因果</td>
<td>系统思考，识别多重影响因素</td>
</tr>
<tr>
<td><strong>解决方案</strong></td>
<td>标准化方案，适用性有限</td>
<td>创新组合，高度情境化</td>
</tr>
<tr>
<td><strong>错误率</strong></td>
<td>在复杂问题上高错误率</td>
<td>显著降低认知盲区</td>
</tr>
<tr>
<td><strong>知识结构</strong></td>
<td>垂直深入，领域局限</td>
<td>跨学科连接，T型知识结构</td>
</tr>
</tbody>
</table>
<h2 id="_3">三、逆向思维：颠覆常规的认知艺术</h2>
<blockquote>
<p>“我只想知道我将来会死在什么地方，这样我就可以永远不去那里啦。”——查理·芒格</p>
</blockquote>
<p>如果说多元思维是芒格的“思想武器库”，那么<strong>逆向思考</strong>则是他最具标志性的思维利刃。这种从问题反面切入的思考方式贯穿了他的投资哲学与生活智慧：</p>
<ul>
<li><strong>在投资中的应用</strong>：不直接问“如何获得高回报”，而是思考“<strong>如何避免永久性资本损失</strong>”。芒格指出：“投资股市最大的风险其实并不是价格的上下起伏，而是你的投资未来会不会出现永久性的亏损。单纯的股价下跌不仅不是风险，简直就是机会。”</li>
<li><strong>人生决策的反向路径</strong>：不问“如何幸福”，而研究“<strong>如何确保痛苦生活</strong>”。在1986年哈佛毕业演讲中，芒格开出四味“痛苦药方”：<ol>
<li><strong>反复无常</strong>：不虔诚地做正在做的事，频繁更换目标和承诺</li>
<li><strong>封闭学习</strong>：只从自身经验学习，忽视他人智慧</li>
<li><strong>一蹶不振</strong>：遭遇失败就放弃</li>
<li><strong>拒绝反思</strong>：忽略逆向思考的价值</li>
</ol>
</li>
</ul>
<p>这种逆向思维模式与爱因斯坦、达尔文等科学巨匠的方法论惊人一致。爱因斯坦没有试图修正麦克斯韦定律以符合牛顿力学，而是<strong>逆向修正牛顿定律</strong>使其符合麦克斯韦方程组，从而发现了相对论。达尔文则<strong>主动寻找证据否定自己的理论</strong>，使进化论经受住严苛检验。</p>
<h2 id="_4">四、投资哲学与决策检查清单：价值投资的智慧体系</h2>
<p>作为价值投资的殿堂级人物，芒格的投资哲学远超出股票分析的范畴，形成了一套完整的决策生态系统：</p>
<h3 id="1">1. 核心投资原则</h3>
<ul>
<li><strong>能力圈原则</strong>：“<strong>人们需要找出一块特殊的能力领域，然后把精力放进去。如果一个人确实有能力，就会非常清楚自己的能力圈边界在哪里。</strong>”</li>
<li><strong>护城河理论</strong>：寻找拥有可持续竞争优势的企业，警惕“竞争性毁灭”力量</li>
<li><strong>安全边际</strong>：当价格远低于内在价值时买入，建立风险缓冲</li>
<li><strong>集中投资</strong>：“当好项目出现时，我们必须能够认出来，因为好项目不会经常出现。机会只会眷顾有准备的人。”</li>
<li><strong>长期复利</strong>：“复利是世界第八大奇迹”，耐心是投资者最稀缺的品质</li>
</ul>
<h3 id="2">2. 传奇的检查清单系统</h3>
<p>芒格倡导使用类似飞行员起飞前的检查清单，避免认知盲区。他的投资检查清单包含11个维度：</p>
<ol>
<li><strong>风险</strong>：所有投资评估从测量风险开始</li>
<li><strong>独立</strong>：“唯有在童话中，皇帝才会被告知自己没穿衣服”</li>
<li><strong>准备</strong>：“唯一获胜方法是工作、工作、工作，并希望拥有一点洞察力”</li>
<li><strong>谦虚</strong>：承认无知是智慧的开端</li>
<li><strong>严格分析</strong>：使用科学方法和检查清单</li>
<li><strong>配置</strong>：合理配置资本资源</li>
<li><strong>耐心</strong>：克制人类天生爱行动的偏好</li>
<li><strong>决心</strong>：机会来临时果断行动</li>
<li><strong>改变</strong>：适应无法消除的复杂性</li>
<li><strong>专注</strong>：别把事情搞复杂</li>
<li><strong>诚实</strong>：永远坚持道德底线</li>
</ol>
<p>这种结构化思考工具是应对复杂决策的利器。正如芒格所说：“<strong>聪明人成为赢家的秘诀就是工作、工作、再工作，学习、学习、再学习，并期待这辈子能看中几次机会，然后狠狠下注。</strong>”</p>
<p><em>表：《穷查理宝典》核心内容框架</em></p>
<table>
<thead>
<tr>
<th><strong>章节</strong></th>
<th><strong>核心内容</strong></th>
<th><strong>价值亮点</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>第一章：芒格传略</strong></td>
<td>成长经历与职业轨迹</td>
<td>理解思想形成的背景</td>
</tr>
<tr>
<td><strong>第二章：生活、学习与决策方法</strong></td>
<td>多元思维模型、逆向思考</td>
<td>认知方法论的核心</td>
</tr>
<tr>
<td><strong>第三章：芒格主义</strong></td>
<td>年会评论与即席谈话</td>
<td>原汁原味的智慧箴言</td>
</tr>
<tr>
<td><strong>第四章：查理十一讲</strong></td>
<td>重要演讲全收录</td>
<td>思想体系的完整呈现</td>
</tr>
<tr>
<td><strong>第五章：文章与评论</strong></td>
<td>第三方视角的芒格分析</td>
<td>多维度的思想解读</td>
</tr>
</tbody>
</table>
<h2 id="_5">五、人生智慧与道德坐标：超越投资的普世价值</h2>
<p>《穷查理宝典》超越了一般投资书籍的范畴，它更是一部关于<strong>如何过上有尊严、有智慧、有温度的生活</strong>的指南：</p>
<ul>
<li>
<p><strong>工作伦理</strong>：芒格提出三条职业选择原则：</p>
<ol>
<li>别兜售你自己不会购买的东西</li>
<li>别为你不尊敬和钦佩的人工作</li>
<li>只跟你喜欢的人同事</li>
</ol>
</li>
<li>
<p><strong>终身学习</strong>：“<strong>我这辈子遇到的聪明人没有不每天阅读的——没有，一个都没有。</strong>”芒格和巴菲特都是“学习机器”，每天醒着的一半时间都在阅读。</p>
</li>
<li>
<p><strong>道德基石</strong>：芒格将诚实视为最高策略：“<strong>我认为保持良好的记录是非常重要的。如果你从一开始就能够在诸如诚实这样简单的事情上拥有完美的记录，你将会在这个世界上取得很大的成功。</strong>”</p>
</li>
<li>
<p><strong>25种心理倾向</strong>：书中详细分析了人类常见的认知误区，如：</p>
<ul>
<li>奖励和惩罚超级反应倾向</li>
<li>避免怀疑倾向</li>
<li>社会认同倾向（从众心理）</li>
<li>被剥夺超级反应倾向（损失厌恶）</li>
<li>自视过高的倾向</li>
</ul>
</li>
</ul>
<p>了解这些倾向能帮助我们避免非理性决策。</p>
<ul>
<li>
<p><strong>人生困境应对法</strong>：芒格建议：</p>
<ol>
<li>期望别太高</li>
<li>拥有幽默感</li>
<li>让自己置身于朋友和家人之中</li>
<li>适应生活变化</li>
</ol>
</li>
<li>
<p><strong>财富与人生</strong>：“<strong>如果你在生活中唯一的成功就是通过买股票发财，那么这是一种失败的生活。生活不仅仅是精明地积累财富。</strong>”芒格强调独立是赚钱的目的，而非相反。</p>
</li>
</ul>
<h2 id="_6">六、如何阅读这部思想巨著：通向智慧的道路指南</h2>
<p>《穷查理宝典》不是一本适合速读的书籍，而是<strong>需要反复咀嚼的思想经典</strong>。以下阅读建议将帮助你获得最大收获：</p>
<ol>
<li>
<p><strong>主题化阅读路径</strong>：</p>
<ul>
<li><strong>初学者</strong>：从第二章“生活、学习和决策方法”开始，掌握多元思维和逆向思考的核心</li>
<li><strong>投资者</strong>：精读第四章的演讲“关于现实思维的现实思考？”和“一流慈善基金的投资实践”</li>
<li><strong>人生思考者</strong>：品味第三章“芒格主义”中的即席谈话，感受智慧箴言的魅力</li>
</ul>
</li>
<li>
<p><strong>思维导图学习法</strong>：<br />
    在阅读过程中绘制个人化的思维导图，将芒格的多元思维模型与自身知识体系连接。重点关注：</p>
<ul>
<li>学科基础原理（数学、心理学、经济学等）</li>
<li>决策检查清单</li>
<li>人类误判心理学</li>
</ul>
</li>
<li>
<p><strong>实践应用建议</strong>：</p>
<ul>
<li><strong>建立检查清单</strong>：在重要决策前系统运用11项检查点</li>
<li><strong>每日逆向练习</strong>：遇到问题先思考“反面解决方案”</li>
<li><strong>能力圈日记</strong>：定期记录和评估自己的能力边界</li>
<li><strong>跨学科阅读计划</strong>：每月研读一门新学科的基础著作</li>
</ul>
</li>
<li>
<p><strong>反复精读与讨论</strong>：<br />
    李录在中文版序言中提到：“2005年本书第一版问世时，我如获至宝，<strong>反复研读，每读一次都有新的收获</strong>。”建议与志同道合者组成读书会，深入讨论书中观点。</p>
</li>
</ol>
<p>查理·芒格的思想穿越时空，其价值不仅在于创造了巨额财富，更在于提供了一套<strong>应对复杂世界的思维方法和生活哲学</strong>。在信息爆炸而智慧稀缺的时代，《穷查理宝典》犹如一座灯塔，照亮我们认知的盲区，指引我们避开错误的暗礁，航向更加理性、充实的人生。</p>
<p>正如这位智者留给我们的最后忠告：“<strong>每天起床的时候，争取变得比你从前更聪明一点。认真地、出色地完成你的任务。慢慢地，你会有所进步。到最后——如果你足够长寿的话——你将会得到你应得的东西。</strong>”</p>
<h2 id="_7">七、附件</h2>
<p><a href="https://github.com/user-attachments/files/21113993/Charles.Thomas.Munger.Z-Library.zip">穷查理宝典 (查理．芒格 (Charles Thomas Munger)) (Z-Library).zip</a></p></div>
<div style="font-size:small;margin-top:8px;float:right;">❤️ 免责声明：以上内容纯属虚构，如有雷同纯属巧合，私自传播影响自负，瞎写写勿传播，谢谢！❤️</div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">评论</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><style>
        /* 添加返回顶部按钮的样式 */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #4a6cf7, #6c8eff);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(74, 108, 247, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            visibility: hidden;
            z-index: 9999;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: linear-gradient(135deg, #3a5ce7, #5c7cff);
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 6px 16px rgba(74, 108, 247, 0.4);
        }

        .back-to-top:active {
            transform: translateY(-2px) scale(1.05);
        }

        /* 链接样式 */
        a {
            text-decoration: none;
            color: #333;
            transition: font-weight 0.3s ease, transform 0.3s ease;
        }

        a:hover {
            font-weight: bold; /* 鼠标悬停时链接变粗 */
            transform: scale(1.1); /* 字体变大 */
        }
    </style>
    <div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://todomy.github.io">TodoMy</a></div>
    <div id="footer2">
        <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
    </div>

    <!-- 添加返回顶部按钮 -->
    <div class="back-to-top" onclick="scrollToTop()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
        </svg>
    </div>

    <script>
        var now = new Date();
        document.getElementById("copyrightYear").innerHTML = now.getFullYear();

        if ("11/24/2024" != "") {
            var startSite = new Date("11/24/2024");
            var diff = now.getTime() - startSite.getTime();
            var diffDay = Math.floor(diff / (1000 * 60 * 60 * 24));
            document.getElementById("runday").innerHTML = "网站运行" + diffDay + "天" + " • ";
        }

        // 返回顶部功能
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // 监听滚动事件
        window.addEventListener('scroll', function() {
            var scrollPosition = window.scrollY;
            var button = document.querySelector('.back-to-top');
            
            // 使用 Intersection Observer API 或简单的滚动检测
            if (scrollPosition > 300) { // 增加显示阈值，减少不必要的显示
                button.classList.add('visible');
            } else {
                button.classList.remove('visible');
            }
        });
        
        // 为支持平滑滚动添加 polyfill 检测
        if (!('scrollBehavior' in document.documentElement.style)) {
            // 如果浏览器不支持 smooth scroll，可以在这里添加 polyfill 或使用替代方案
            function smoothScrollTo(element, to, duration) {
                var start = element.scrollTop,
                    change = to - start,
                    currentTime = 0,
                    increment = 20;
                
                var animateScroll = function() {
                    currentTime += increment;
                    var val = easeInOutQuad(currentTime, start, change, duration);
                    element.scrollTop = val;
                    if (currentTime < duration) {
                        setTimeout(animateScroll, increment);
                    }
                };
                
                function easeInOutQuad(t, b, c, d) {
                    t /= d / 2;
                    if (t < 1) return c / 2 * t * t + b;
                    t--;
                    return -c / 2 * (t * (t - 2) - 1) + b;
                }
                
                animateScroll();
            }
        }
    </script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode", mode);
    document.getElementById("themeSwitch").setAttribute("d", IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color = color;
    if(utterancesLoad == 1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
// 使用当前主题模式初始化
let currentTheme = document.documentElement.getAttribute('data-color-mode');
if(themeSettings[currentTheme]){changeTheme(...themeSettings[currentTheme]);}
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);

// 初始化变量
var blogData = {
    commentNum: 115,
    needComment: 1,
    themeMode: 'manual',
    nightTheme: 'dark_colorblind',
    repoName: 'local_repo'
};

// 添加评论数量
if(blogData.commentNum > 0) {
    var cmButton = document.getElementById("cmButton");
    var span = document.createElement("span");
    span.setAttribute("class","Counter");
    span.innerHTML = blogData.commentNum;
    cmButton.appendChild(span);
}

// 评论相关功能
if(blogData.needComment == 1) {
function openComments() {
    var cm = document.getElementById("comments");
    var cmButton = document.getElementById("cmButton");
    
    // 禁用按钮防止重复点击
    cmButton.disabled = true;
    
    // 清空评论区域，不添加额外的加载提示，由utterances.client.js统一处理
    cm.innerHTML = '';
    
    // 使用setTimeout延迟加载脚本，允许浏览器处理当前UI更新
    setTimeout(function() {
        var script = document.createElement("script");
        // 使用本地utterances评论系统脚本
        script.setAttribute("src","/plugins/utterances.client.js");
        script.setAttribute("repo", blogData.repoName);
        script.setAttribute("issue-term","title");
        if(blogData.themeMode == 'manual') {
            if(localStorage.getItem("meek_theme") == "dark") {
                script.setAttribute("theme","dark-blue");
            } else if(localStorage.getItem("meek_theme") == "light") {
                script.setAttribute("theme","github-light");
            } else {
                script.setAttribute("theme","preferred-color-scheme");
            }
        } else {
            script.setAttribute("theme", blogData.nightTheme);
        }
        script.setAttribute("crossorigin","anonymous");
        script.setAttribute("async","true");
        
        // 添加错误处理
        script.onerror = function() {
            cm.innerHTML = '<div style="color: #d73a49; text-align: center; padding: 20px;">评论加载失败，请稍后重试</div>';
            cmButton.innerHTML = "重试";
            cmButton.disabled = false;
            if(window.int) clearInterval(window.int);
        };
        
        cm.appendChild(script);

        // 存储定时器到window对象，避免重复创建
        window.int = setInterval(iFrameLoading, 100);
    }, 100);
}

function iFrameLoading() {
    var utterances = document.getElementsByClassName('utterances');
    if(utterances.length == 1) {
        // 检查是否已标记为加载完成
        if(utterances[0].classList.contains('utterances-loaded')) {
            window.utterancesLoad = 1;
            clearInterval(window.int);
            document.getElementById("cmButton").style.display = "none";
            console.log("utterances Load OK");
        } else {
            // 作为备选检测，等待iframe加载完成
            var iframe = utterances[0].querySelector('.utterances-frame');
            if(iframe && iframe.contentDocument && iframe.contentDocument.readyState === 'complete') {
                // 手动添加loaded类，确保加载提示正确隐藏
                utterances[0].classList.add('utterances-loaded');
                window.utterancesLoad = 1;
                clearInterval(window.int);
                document.getElementById("cmButton").style.display = "none";
                console.log("utterances Load OK (by iframe readyState)");
            }
        }
    }
}
}
</script>
<script src='/plugins/GmeekTOC.js'></script><script src='/plugins/lightbox.js'></script>

<script>
    // 图片懒加载功能
    document.addEventListener('DOMContentLoaded', function() {
        // 检查浏览器是否支持原生懒加载
        if ('loading' in HTMLImageElement.prototype) {
            const images = document.querySelectorAll('img[lazy-src]');
            images.forEach(img => {
                img.src = img.getAttribute('lazy-src');
                img.removeAttribute('lazy-src');
            });
        } else {
            // 不支持原生懒加载时使用JavaScript实现
            const lazyLoadImages = function() {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.getAttribute('lazy-src');
                            img.removeAttribute('lazy-src');
                            observer.unobserve(img);
                        }
                    });
                });
                
                document.querySelectorAll('img[lazy-src]').forEach(img => {
                    imageObserver.observe(img);
                });
            };
            
            // 启动懒加载
            lazyLoadImages();
        }
    });
    
    // 资源合并优化相关：动态加载非关键JavaScript
    function loadScript(url, callback) {
        const script = document.createElement('script');
        script.src = url;
        script.async = true;
        script.onload = callback;
        document.head.appendChild(script);
    }
    
    // 页面加载完成后再加载非关键脚本
    window.addEventListener('load', function() {
        // 可以在这里添加非关键脚本的延迟加载
    });
</script>
</html>
