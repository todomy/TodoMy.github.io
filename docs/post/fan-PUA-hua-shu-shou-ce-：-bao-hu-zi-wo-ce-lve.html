<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark_colorblind" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 缓存控制头 -->
    <meta http-equiv="Cache-Control" content="max-age=31536000, public, must-revalidate">
    <!-- 移除固定过期日期，让浏览器基于max-age自动计算 -->
    <link href='/plugins/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://avatars.githubusercontent.com/u/62632079?v=4"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="> [!TIP]
> 万物皆可PUA.

## 🌟 核心防御原则
**「三不准则」**  
✅ 不接情绪 | ✅ 不辩对错 | ✅ 不背因果  
**底层逻辑**：所有PUA攻击的本质都是**能量掠夺**，保护策略=切断能量输送通道

---

## 一、心理防御体系构建

### 🔒 能量结界设置指南
| 场景         | 防御话术                     | 配套动作               |
|--------------|----------------------------|----------------------|
| 遭遇贬低打压    | '这是你的观点'                 | 后退半步拉开物理距离        |
| 被道德绑架     | '你的情绪你自己处理'             | 低头整理衣角/看表         |
| 陷入争辩陷阱    | '哦？有意思'                  | 拿起水杯喝水拖延        |

### 💡 认知校准训练
**每日必修课**：  
1. **镜子练习**：  
   👉 对镜重复：'我有权让任何让我不适的人滚出生活'  
2. **成就清单**：  
   📝 记录3件当日做得好的事（例：'今天拒绝了同事的无理要求'）  
3. **角色扮演**：  
   🎭 模拟PUA场景并录音复盘，重点观察身体语言变化

---

## 二、即时反击话术库

### 🛡️ 万能防御公式
```markdown
1. **复读机模式**  
   👉 对方：'你这人真自私！'  
   🔄 回应：'你说我自私？'（等待对方解释消耗其能量）  

2. **焦点转移术**  
   👉 对方：'别人都能加班你怎么不行？'  
   🔄 回应：'您似乎对行业加班文化很有研究？'  

3. **降维打击法**  
   👉 对方：'你不听话就分手！'  
   🔄 回应：'用威胁得到的关系你要吗？'（微笑直视）
```

### 📌 分场景应对矩阵
#### 职场篇
| 攻击类型       | 防御话术                     | 进阶动作             |
|--------------|----------------------------|--------------------|
| 情感绑架       | '感谢认可，我的价值有市场标准'       | 展示猎头联系记录       |
| 公开羞辱       | '建议您先了解XX法规第X条'         | 打开手机录音界面       |
| 过度压榨       | '我的时间单价是X元/小时'           | 发送计时软件截图       |

#### 情感篇
| 操控手段       | 反杀话术                     | 心理战技巧           |
|--------------|----------------------------|--------------------|
| 三角测量       | '你对别人这么了解，不如去当红娘？'     | 突然轻笑摇头          |
| 煤气灯效应      | '我的记忆有云端备份'             | 亮出手机录音文件       |
| 以死相逼       | '我现在帮你打120/110'          | 立即拨打紧急电话       |

---

## 三、长效保护机制

### 🧠 认知强化系统
**四大过滤器**：  
1. **动机审查**：  
   'TA说这些话是想解决什么问题？还是想制造问题？'  
2. **成本核算**：  
   '反驳这句话需要消耗我多少能量？'  
3. **后果预判**：  
   '最坏结果是否在承受范围内？'  
4. **价值评估**：  
   '这个人对我的成长有建设性作用吗？'  

### 📚 能量补给清单
| 类型         | 推荐内容                  | 使用场景             |
|-------------|-------------------------|--------------------|
| 心理武器       | 《煤气灯效应》《操纵心理学》       | 睡前阅读15分钟         |
| 能量音乐       | 重金属/进行曲类BGM            | 通勤时听             |
| 物理护盾       | 录音笔/智能手表一键报警功能       | 见危险人物必带         |

---

## 四、危机处理预案

### 🚨 红色警报响应
**立即执行三步骤**：  
1. **物理隔离**：  
   👉 退至监控覆盖区/公共场所  
2. **证据固化**：  
   📱 开启云端同步录音录像  
3. **支援呼叫**：  
   📞 向预设紧急联系人发送定位暗号（如'今晚吃火锅吗？'=需要救援）  

### ⚖️ 法律武器库
| 侵权行为       | 取证方式                  | 法律依据             |
|--------------|-------------------------|--------------------|
| 名誉损害       | 区块链存证网页截图            | 民法典第1024条        |
| 隐私泄露       | 录屏+哈希值验证              | 刑法第253条          |
| 暴力威胁       | 伤情鉴定+监控录像            | 反家庭暴力法第2条      |

---

## 五、防御力自测表

### 📝 每周检核清单
2. [ ] 是否完整记录了3次成功防御案例  
1. [ ] 是否新增了有效反PUA话术  
3. [ ] 是否淘汰了1个能量吸血鬼  
4. [ ] 是否进行了心理脱敏训练  

### 🔋 能量等级评估
| 状态灯       | 表现特征                   | 应对方案             |
|-------------|--------------------------|--------------------|
| 🟢 绿灯       | 能立即识别初级PUA             | 保持日常训练          |
| 🟡 黄灯       | 事后才能反应过来               | 增加情景模拟练习        |
| 🔴 红灯       | 持续自我怀疑/失眠             | 立即寻求专业心理咨询     |

---

> **终极护盾**：  
> 当所有策略失效时，记住你有权：  
> 1. 突然起身离开  
> 2. 删除拉黑全套  
> 3. 笑着说出：'你不配和我对话'  

**更新日志**：本手册需每月迭代，推荐结合《非暴力沟通》提升防御精准度。">
<meta property="og:title" content="反PUA话术手册：保护自我策略">
<meta property="og:description" content="> [!TIP]
> 万物皆可PUA.

## 🌟 核心防御原则
**「三不准则」**  
✅ 不接情绪 | ✅ 不辩对错 | ✅ 不背因果  
**底层逻辑**：所有PUA攻击的本质都是**能量掠夺**，保护策略=切断能量输送通道

---

## 一、心理防御体系构建

### 🔒 能量结界设置指南
| 场景         | 防御话术                     | 配套动作               |
|--------------|----------------------------|----------------------|
| 遭遇贬低打压    | '这是你的观点'                 | 后退半步拉开物理距离        |
| 被道德绑架     | '你的情绪你自己处理'             | 低头整理衣角/看表         |
| 陷入争辩陷阱    | '哦？有意思'                  | 拿起水杯喝水拖延        |

### 💡 认知校准训练
**每日必修课**：  
1. **镜子练习**：  
   👉 对镜重复：'我有权让任何让我不适的人滚出生活'  
2. **成就清单**：  
   📝 记录3件当日做得好的事（例：'今天拒绝了同事的无理要求'）  
3. **角色扮演**：  
   🎭 模拟PUA场景并录音复盘，重点观察身体语言变化

---

## 二、即时反击话术库

### 🛡️ 万能防御公式
```markdown
1. **复读机模式**  
   👉 对方：'你这人真自私！'  
   🔄 回应：'你说我自私？'（等待对方解释消耗其能量）  

2. **焦点转移术**  
   👉 对方：'别人都能加班你怎么不行？'  
   🔄 回应：'您似乎对行业加班文化很有研究？'  

3. **降维打击法**  
   👉 对方：'你不听话就分手！'  
   🔄 回应：'用威胁得到的关系你要吗？'（微笑直视）
```

### 📌 分场景应对矩阵
#### 职场篇
| 攻击类型       | 防御话术                     | 进阶动作             |
|--------------|----------------------------|--------------------|
| 情感绑架       | '感谢认可，我的价值有市场标准'       | 展示猎头联系记录       |
| 公开羞辱       | '建议您先了解XX法规第X条'         | 打开手机录音界面       |
| 过度压榨       | '我的时间单价是X元/小时'           | 发送计时软件截图       |

#### 情感篇
| 操控手段       | 反杀话术                     | 心理战技巧           |
|--------------|----------------------------|--------------------|
| 三角测量       | '你对别人这么了解，不如去当红娘？'     | 突然轻笑摇头          |
| 煤气灯效应      | '我的记忆有云端备份'             | 亮出手机录音文件       |
| 以死相逼       | '我现在帮你打120/110'          | 立即拨打紧急电话       |

---

## 三、长效保护机制

### 🧠 认知强化系统
**四大过滤器**：  
1. **动机审查**：  
   'TA说这些话是想解决什么问题？还是想制造问题？'  
2. **成本核算**：  
   '反驳这句话需要消耗我多少能量？'  
3. **后果预判**：  
   '最坏结果是否在承受范围内？'  
4. **价值评估**：  
   '这个人对我的成长有建设性作用吗？'  

### 📚 能量补给清单
| 类型         | 推荐内容                  | 使用场景             |
|-------------|-------------------------|--------------------|
| 心理武器       | 《煤气灯效应》《操纵心理学》       | 睡前阅读15分钟         |
| 能量音乐       | 重金属/进行曲类BGM            | 通勤时听             |
| 物理护盾       | 录音笔/智能手表一键报警功能       | 见危险人物必带         |

---

## 四、危机处理预案

### 🚨 红色警报响应
**立即执行三步骤**：  
1. **物理隔离**：  
   👉 退至监控覆盖区/公共场所  
2. **证据固化**：  
   📱 开启云端同步录音录像  
3. **支援呼叫**：  
   📞 向预设紧急联系人发送定位暗号（如'今晚吃火锅吗？'=需要救援）  

### ⚖️ 法律武器库
| 侵权行为       | 取证方式                  | 法律依据             |
|--------------|-------------------------|--------------------|
| 名誉损害       | 区块链存证网页截图            | 民法典第1024条        |
| 隐私泄露       | 录屏+哈希值验证              | 刑法第253条          |
| 暴力威胁       | 伤情鉴定+监控录像            | 反家庭暴力法第2条      |

---

## 五、防御力自测表

### 📝 每周检核清单
2. [ ] 是否完整记录了3次成功防御案例  
1. [ ] 是否新增了有效反PUA话术  
3. [ ] 是否淘汰了1个能量吸血鬼  
4. [ ] 是否进行了心理脱敏训练  

### 🔋 能量等级评估
| 状态灯       | 表现特征                   | 应对方案             |
|-------------|--------------------------|--------------------|
| 🟢 绿灯       | 能立即识别初级PUA             | 保持日常训练          |
| 🟡 黄灯       | 事后才能反应过来               | 增加情景模拟练习        |
| 🔴 红灯       | 持续自我怀疑/失眠             | 立即寻求专业心理咨询     |

---

> **终极护盾**：  
> 当所有策略失效时，记住你有权：  
> 1. 突然起身离开  
> 2. 删除拉黑全套  
> 3. 笑着说出：'你不配和我对话'  

**更新日志**：本手册需每月迭代，推荐结合《非暴力沟通》提升防御精准度。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://todomy.github.io/post/fan-PUA-hua-shu-shou-ce-%EF%BC%9A-bao-hu-zi-wo-ce-lve.html">
<meta property="og:image" content="https://avatars.githubusercontent.com/u/62632079?v=4">
<title>反PUA话术手册：保护自我策略</title>

<!-- 预连接到utteranc.es域名，减少DNS查询和连接建立时间 -->
<link rel="preconnect" href="https://utteranc.es">
<link rel="dns-prefetch" href="https://utteranc.es">


</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}

/* 评论相关样式已简化 */

@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
</style>
<style>.markdown-alert{padding:0.5rem 1rem;margin-bottom:1rem;border-left:.25em solid var(--borderColor-default,var(--color-border-default));}.markdown-alert .markdown-alert-title {display:flex;font-weight:var(--base-text-weight-medium,500);align-items:center;line-height:1;}.markdown-alert>:first-child {margin-top:0;}.markdown-alert>:last-child {margin-bottom:0;}</style><style>.markdown-alert.markdown-alert-tip {border-left-color:var(--borderColor-success-emphasis, var(--color-success-emphasis));background-color:var(--color-success-subtle);}.markdown-alert.markdown-alert-tip .markdown-alert-title {color: var(--fgColor-success,var(--color-success-fg));}</style>



<body>
    <div id="header">
<h1 class="postTitle">反PUA话术手册：保护自我策略</h1>
<div class="title-right">
    <a href="https://todomy.github.io" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/todomy/TodoMy.github.io/issues/73" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><blockquote>
<p>[!TIP]<br />
万物皆可PUA.</p>
</blockquote>
<h2 id="_1">🌟 核心防御原则</h2>
<p><strong>「三不准则」</strong><br />
✅ 不接情绪 | ✅ 不辩对错 | ✅ 不背因果<br />
<strong>底层逻辑</strong>：所有PUA攻击的本质都是<strong>能量掠夺</strong>，保护策略=切断能量输送通道</p>
<hr />
<h2 id="_2">一、心理防御体系构建</h2>
<h3 id="_3">🔒 能量结界设置指南</h3>
<table>
<thead>
<tr>
<th>场景</th>
<th>防御话术</th>
<th>配套动作</th>
</tr>
</thead>
<tbody>
<tr>
<td>遭遇贬低打压</td>
<td>"这是你的观点"</td>
<td>后退半步拉开物理距离</td>
</tr>
<tr>
<td>被道德绑架</td>
<td>"你的情绪你自己处理"</td>
<td>低头整理衣角/看表</td>
</tr>
<tr>
<td>陷入争辩陷阱</td>
<td>"哦？有意思"</td>
<td>拿起水杯喝水拖延</td>
</tr>
</tbody>
</table>
<h3 id="_4">💡 认知校准训练</h3>
<p><strong>每日必修课</strong>：<br />
1. <strong>镜子练习</strong>：<br />
   👉 对镜重复："我有权让任何让我不适的人滚出生活"<br />
2. <strong>成就清单</strong>：<br />
   📝 记录3件当日做得好的事（例："今天拒绝了同事的无理要求"）<br />
3. <strong>角色扮演</strong>：<br />
   🎭 模拟PUA场景并录音复盘，重点观察身体语言变化</p>
<hr />
<h2 id="_5">二、即时反击话术库</h2>
<h3 id="_6">🛡️ 万能防御公式</h3>
<div class="codehilite"><pre><span></span><code><span class="k">1.</span> <span class="gs">**复读机模式**</span>  
   👉 对方：&quot;你这人真自私！&quot;  
   🔄 回应：&quot;你说我自私？&quot;（等待对方解释消耗其能量）  

<span class="k">2.</span> <span class="gs">**焦点转移术**</span>  
   👉 对方：&quot;别人都能加班你怎么不行？&quot;  
   🔄 回应：&quot;您似乎对行业加班文化很有研究？&quot;  

<span class="k">3.</span> <span class="gs">**降维打击法**</span>  
   👉 对方：&quot;你不听话就分手！&quot;  
   🔄 回应：&quot;用威胁得到的关系你要吗？&quot;（微笑直视）
</code></pre></div>

<h3 id="_7">📌 分场景应对矩阵</h3>
<h4 id="_8">职场篇</h4>
<table>
<thead>
<tr>
<th>攻击类型</th>
<th>防御话术</th>
<th>进阶动作</th>
</tr>
</thead>
<tbody>
<tr>
<td>情感绑架</td>
<td>"感谢认可，我的价值有市场标准"</td>
<td>展示猎头联系记录</td>
</tr>
<tr>
<td>公开羞辱</td>
<td>"建议您先了解XX法规第X条"</td>
<td>打开手机录音界面</td>
</tr>
<tr>
<td>过度压榨</td>
<td>"我的时间单价是X元/小时"</td>
<td>发送计时软件截图</td>
</tr>
</tbody>
</table>
<h4 id="_9">情感篇</h4>
<table>
<thead>
<tr>
<th>操控手段</th>
<th>反杀话术</th>
<th>心理战技巧</th>
</tr>
</thead>
<tbody>
<tr>
<td>三角测量</td>
<td>"你对别人这么了解，不如去当红娘？"</td>
<td>突然轻笑摇头</td>
</tr>
<tr>
<td>煤气灯效应</td>
<td>"我的记忆有云端备份"</td>
<td>亮出手机录音文件</td>
</tr>
<tr>
<td>以死相逼</td>
<td>"我现在帮你打120/110"</td>
<td>立即拨打紧急电话</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_10">三、长效保护机制</h2>
<h3 id="_11">🧠 认知强化系统</h3>
<p><strong>四大过滤器</strong>：<br />
1. <strong>动机审查</strong>：<br />
   "TA说这些话是想解决什么问题？还是想制造问题？"<br />
2. <strong>成本核算</strong>：<br />
   "反驳这句话需要消耗我多少能量？"<br />
3. <strong>后果预判</strong>：<br />
   "最坏结果是否在承受范围内？"<br />
4. <strong>价值评估</strong>：<br />
   "这个人对我的成长有建设性作用吗？"  </p>
<h3 id="_12">📚 能量补给清单</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>推荐内容</th>
<th>使用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>心理武器</td>
<td>《煤气灯效应》《操纵心理学》</td>
<td>睡前阅读15分钟</td>
</tr>
<tr>
<td>能量音乐</td>
<td>重金属/进行曲类BGM</td>
<td>通勤时听</td>
</tr>
<tr>
<td>物理护盾</td>
<td>录音笔/智能手表一键报警功能</td>
<td>见危险人物必带</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_13">四、危机处理预案</h2>
<h3 id="_14">🚨 红色警报响应</h3>
<p><strong>立即执行三步骤</strong>：<br />
1. <strong>物理隔离</strong>：<br />
   👉 退至监控覆盖区/公共场所<br />
2. <strong>证据固化</strong>：<br />
   📱 开启云端同步录音录像<br />
3. <strong>支援呼叫</strong>：<br />
   📞 向预设紧急联系人发送定位暗号（如"今晚吃火锅吗？"=需要救援）  </p>
<h3 id="_15">⚖️ 法律武器库</h3>
<table>
<thead>
<tr>
<th>侵权行为</th>
<th>取证方式</th>
<th>法律依据</th>
</tr>
</thead>
<tbody>
<tr>
<td>名誉损害</td>
<td>区块链存证网页截图</td>
<td>民法典第1024条</td>
</tr>
<tr>
<td>隐私泄露</td>
<td>录屏+哈希值验证</td>
<td>刑法第253条</td>
</tr>
<tr>
<td>暴力威胁</td>
<td>伤情鉴定+监控录像</td>
<td>反家庭暴力法第2条</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_16">五、防御力自测表</h2>
<h3 id="_17">📝 每周检核清单</h3>
<ol>
<li>[ ] 是否完整记录了3次成功防御案例  </li>
<li>[ ] 是否新增了有效反PUA话术  </li>
<li>[ ] 是否淘汰了1个能量吸血鬼  </li>
<li>[ ] 是否进行了心理脱敏训练  </li>
</ol>
<h3 id="_18">🔋 能量等级评估</h3>
<table>
<thead>
<tr>
<th>状态灯</th>
<th>表现特征</th>
<th>应对方案</th>
</tr>
</thead>
<tbody>
<tr>
<td>🟢 绿灯</td>
<td>能立即识别初级PUA</td>
<td>保持日常训练</td>
</tr>
<tr>
<td>🟡 黄灯</td>
<td>事后才能反应过来</td>
<td>增加情景模拟练习</td>
</tr>
<tr>
<td>🔴 红灯</td>
<td>持续自我怀疑/失眠</td>
<td>立即寻求专业心理咨询</td>
</tr>
</tbody>
</table>
<hr />
<blockquote>
<p><strong>终极护盾</strong>：<br />
当所有策略失效时，记住你有权：<br />
1. 突然起身离开<br />
2. 删除拉黑全套<br />
3. 笑着说出："你不配和我对话"  </p>
</blockquote>
<p><strong>更新日志</strong>：本手册需每月迭代，推荐结合《非暴力沟通》提升防御精准度。遇到极端情况请立即拨打110或12338妇女援助热线！<br />
``` </p>
<h3 id="_19">✨ 手册使用说明</h3>
<ol>
<li><strong>重点标注</strong>：黄色高亮部分需肌肉记忆</li>
<li><strong>情景模拟</strong>：每周与朋友角色扮演2次</li>
<li><strong>防御升级</strong>：每季度更新法律武器库</li>
</ol>
<blockquote>
<p>记住：最好的防御是建立<strong>无可替代的价值</strong>，当你的维度足够高时，PUA手段会自动失效。</p>
</blockquote></div>
<div style="font-size:small;margin-top:8px;float:right;">❤️ 免责声明：以上内容纯属虚构，如有雷同纯属巧合，私自传播影响自负，瞎写写勿传播，谢谢！❤️</div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">评论</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><style>
        /* 添加返回顶部按钮的样式 */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #4a6cf7, #6c8eff);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(74, 108, 247, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            visibility: hidden;
            z-index: 9999;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: linear-gradient(135deg, #3a5ce7, #5c7cff);
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 6px 16px rgba(74, 108, 247, 0.4);
        }

        .back-to-top:active {
            transform: translateY(-2px) scale(1.05);
        }

        /* 链接样式 */
        a {
            text-decoration: none;
            color: #333;
            transition: font-weight 0.3s ease, transform 0.3s ease;
        }

        a:hover {
            font-weight: bold; /* 鼠标悬停时链接变粗 */
            transform: scale(1.1); /* 字体变大 */
        }
    </style>
    <div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://todomy.github.io">TodoMy</a></div>
    <div id="footer2">
        <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
    </div>

    <!-- 添加返回顶部按钮 -->
    <div class="back-to-top" onclick="scrollToTop()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
        </svg>
    </div>

    <script>
        var now = new Date();
        document.getElementById("copyrightYear").innerHTML = now.getFullYear();

        if ("11/24/2024" != "") {
            var startSite = new Date("11/24/2024");
            var diff = now.getTime() - startSite.getTime();
            var diffDay = Math.floor(diff / (1000 * 60 * 60 * 24));
            document.getElementById("runday").innerHTML = "网站运行" + diffDay + "天" + " • ";
        }

        // 返回顶部功能
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // 监听滚动事件
        window.addEventListener('scroll', function() {
            var scrollPosition = window.scrollY;
            var button = document.querySelector('.back-to-top');
            
            // 使用 Intersection Observer API 或简单的滚动检测
            if (scrollPosition > 300) { // 增加显示阈值，减少不必要的显示
                button.classList.add('visible');
            } else {
                button.classList.remove('visible');
            }
        });
        
        // 为支持平滑滚动添加 polyfill 检测
        if (!('scrollBehavior' in document.documentElement.style)) {
            // 如果浏览器不支持 smooth scroll，可以在这里添加 polyfill 或使用替代方案
            function smoothScrollTo(element, to, duration) {
                var start = element.scrollTop,
                    change = to - start,
                    currentTime = 0,
                    increment = 20;
                
                var animateScroll = function() {
                    currentTime += increment;
                    var val = easeInOutQuad(currentTime, start, change, duration);
                    element.scrollTop = val;
                    if (currentTime < duration) {
                        setTimeout(animateScroll, increment);
                    }
                };
                
                function easeInOutQuad(t, b, c, d) {
                    t /= d / 2;
                    if (t < 1) return c / 2 * t * t + b;
                    t--;
                    return -c / 2 * (t * (t - 2) - 1) + b;
                }
                
                animateScroll();
            }
        }
    </script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode", mode);
    document.getElementById("themeSwitch").setAttribute("d", IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color = color;
    if(utterancesLoad == 1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
// 使用当前主题模式初始化
let currentTheme = document.documentElement.getAttribute('data-color-mode');
if(themeSettings[currentTheme]){changeTheme(...themeSettings[currentTheme]);}
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);

// 初始化变量
var blogData = {
    commentNum: 0,
    needComment: 1,
    themeMode: 'manual',
    nightTheme: 'dark_colorblind',
    repoName: 'local_repo'
};

// 添加评论数量
if(blogData.commentNum > 0) {
    var cmButton = document.getElementById("cmButton");
    var span = document.createElement("span");
    span.setAttribute("class","Counter");
    span.innerHTML = blogData.commentNum;
    cmButton.appendChild(span);
}

// 评论相关功能
if(blogData.needComment == 1) {
function openComments() {
    var cm = document.getElementById("comments");
    var cmButton = document.getElementById("cmButton");
    
    // 禁用按钮防止重复点击
    cmButton.disabled = true;
    
    // 清空评论区域，不添加额外的加载提示，由utterances.client.js统一处理
    cm.innerHTML = '';
    
    // 使用setTimeout延迟加载脚本，允许浏览器处理当前UI更新
    setTimeout(function() {
        var script = document.createElement("script");
        // 使用本地utterances评论系统脚本
        script.setAttribute("src","/plugins/utterances.client.js");
        script.setAttribute("repo", blogData.repoName);
        script.setAttribute("issue-term","title");
        if(blogData.themeMode == 'manual') {
            if(localStorage.getItem("meek_theme") == "dark") {
                script.setAttribute("theme","dark-blue");
            } else if(localStorage.getItem("meek_theme") == "light") {
                script.setAttribute("theme","github-light");
            } else {
                script.setAttribute("theme","preferred-color-scheme");
            }
        } else {
            script.setAttribute("theme", blogData.nightTheme);
        }
        script.setAttribute("crossorigin","anonymous");
        script.setAttribute("async","true");
        
        // 添加错误处理
        script.onerror = function() {
            cm.innerHTML = '<div style="color: #d73a49; text-align: center; padding: 20px;">评论加载失败，请稍后重试</div>';
            cmButton.innerHTML = "重试";
            cmButton.disabled = false;
            if(window.int) clearInterval(window.int);
        };
        
        cm.appendChild(script);

        // 存储定时器到window对象，避免重复创建
        window.int = setInterval(iFrameLoading, 100);
    }, 100);
}

function iFrameLoading() {
    var utterances = document.getElementsByClassName('utterances');
    if(utterances.length == 1) {
        // 检查是否已标记为加载完成
        if(utterances[0].classList.contains('utterances-loaded')) {
            window.utterancesLoad = 1;
            clearInterval(window.int);
            document.getElementById("cmButton").style.display = "none";
            console.log("utterances Load OK");
        } else {
            // 作为备选检测，等待iframe加载完成
            var iframe = utterances[0].querySelector('.utterances-frame');
            if(iframe && iframe.contentDocument && iframe.contentDocument.readyState === 'complete') {
                // 手动添加loaded类，确保加载提示正确隐藏
                utterances[0].classList.add('utterances-loaded');
                window.utterancesLoad = 1;
                clearInterval(window.int);
                document.getElementById("cmButton").style.display = "none";
                console.log("utterances Load OK (by iframe readyState)");
            }
        }
    }
}
}
</script>
<script src='/plugins/GmeekTOC.js'></script><script src='/plugins/lightbox.js'></script>

<script>
    // 图片懒加载功能
    document.addEventListener('DOMContentLoaded', function() {
        // 检查浏览器是否支持原生懒加载
        if ('loading' in HTMLImageElement.prototype) {
            const images = document.querySelectorAll('img[lazy-src]');
            images.forEach(img => {
                img.src = img.getAttribute('lazy-src');
                img.removeAttribute('lazy-src');
            });
        } else {
            // 不支持原生懒加载时使用JavaScript实现
            const lazyLoadImages = function() {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.getAttribute('lazy-src');
                            img.removeAttribute('lazy-src');
                            observer.unobserve(img);
                        }
                    });
                });
                
                document.querySelectorAll('img[lazy-src]').forEach(img => {
                    imageObserver.observe(img);
                });
            };
            
            // 启动懒加载
            lazyLoadImages();
        }
    });
    
    // 资源合并优化相关：动态加载非关键JavaScript
    function loadScript(url, callback) {
        const script = document.createElement('script');
        script.src = url;
        script.async = true;
        script.onload = callback;
        document.head.appendChild(script);
    }
    
    // 页面加载完成后再加载非关键脚本
    window.addEventListener('load', function() {
        // 可以在这里添加非关键脚本的延迟加载
    });
</script>
</html>
